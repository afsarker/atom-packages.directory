<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Atom Packages Directory</title>
    <link rel="stylesheet" href="/assets/application.css">
    <link rel="stylesheet" href="/assets/admin.css">

  </head>
  <body>
    <header>
      <h1><a href="/"><span class="octicon octicon-package"></span>Atom Packages Directory</a></h1>
      <span class="subheader">a package directory for a <a href="http://atom.io">text editor of the 21st Century</a></span>
    </header>
    <section id="content">
      <h1>Proto Repl Charts</h1>
<h1 id="proto-repl-charts-package">proto-repl-charts package</h1>

<p>Proto REPL Charts is an Atom plugin that extends <a href="https://github.com/jasongilman/proto-repl">Proto REPL</a> and allows you to display tables and graphs of results from executed Clojure Code.</p>

<p>Execute this in Proto REPL:</p>

<p><code>Clojure
(prc/line-chart
 "Trigonometry"
 {"sin" (map #(Math/sin %) (range 0.0 6.0 0.2))
  "cos" (map #(Math/cos %) (range 0.0 6.0 0.2))})
</code></p>

<p>… and display this:</p>

<p><img src="https://github.com/jasongilman/proto-repl-charts/raw/master/front_image.png" alt="A screenshot of Proto REPL Charts showing a graph with sine and cosine" /></p>

<h2 id="installation">Installation</h2>

<ol>
  <li>Install <a href="https://github.com/jasongilman/proto-repl#installation">Proto REPL</a>.</li>
  <li><code>apm install proto-repl-charts</code> or go to your Atom settings, select “+ Install” and search for “proto-repl-charts”.</li>
</ol>

<h2 id="usage">Usage</h2>

<p>Proto REPL Charts are invoked from Clojure code run in Proto REPL. A very small Clojure library, proto-repl-charts, defines a namespace <code>prc</code> with functions for displaying different charts.</p>

<h3 id="add-proto-repl-charts-as-a-dependency-in-your-clojure-project">1. Add proto-repl-charts as a dependency in your Clojure project.</h3>

<p>Add
<a href="https://clojars.org/proto-repl-charts"><img src="https://img.shields.io/clojars/v/proto-repl-charts.svg" alt="Clojars Project" /></a>
 to your dependencies in your <code>project.clj</code> file.</p>

<p>(Proto REPL comes with a default Clojure project. If you bring open a new Atom window for and start a REPL it will already have proto-repl-charts dependency loaded and available.)</p>

<h3 id="start-the-repl-in-proto-replhttpsgithubcomjasongilmanproto-replusage-and-wait-for-it-to-come-up">2. <a href="https://github.com/jasongilman/proto-repl#usage">Start the REPL in Proto REPL</a> and wait for it to come up.</h3>

<h3 id="execute-one-of-the-functions-in-the-prc-namespace-see-the-examples-below">3. Execute one of the functions in the <code>prc</code> namespace. See the examples below.</h3>

<p>The <code>prc</code> chart functions are all of the form <code>(prc/&lt;function-name&gt; &lt;tab-name&gt; &lt;series-map&gt; &lt;[options]&gt;)</code></p>

<ul>
  <li><code>function-name</code> - the name of the function to invoke</li>
  <li><code>tab-name</code> - is the name of the chart to put in the Atom tab. Repeated execution will replace the chart in the tab with the matching name.</li>
  <li><code>series-map</code> - should be a map of series names to a sequence of values for that series. For example <code>{"alpha" [1 2 3], "beta" [2 4 5]}</code> would display two series named alpha and beta with the values 1, 2, and 3 for alpha and 2, 4, and 5 for beta.</li>
  <li><code>options</code> - an optional map of display options. The only option supported right now is <code>:labels</code> which is a list of labels. The index of the label in the list corresponds to the index of the values in the series.</li>
</ul>

<h3 id="displaying-a-line-chart">Displaying a Line Chart</h3>

<p><code>Clojure
(let [input-values (range 0.0 6.0 0.5)]
  (prc/line-chart
   "Trigonometry"
   {"sin" (map #(Math/sin %) input-values)
    "cos" (map #(Math/cos %) input-values)}
   {:labels input-values}))
</code></p>

<p><img src="https://github.com/jasongilman/proto-repl-charts/raw/master/examples/line_chart.png" alt="line chart" /></p>

<h3 id="displaying-a-bar-chart">Displaying a Bar Chart</h3>

<p><code>Clojure
(prc/bar-chart
  "GDP_By_Year"
  {"2013" [16768 9469 4919 3731]
   "2014" [17418 10380 4616 3859]}
  {:labels ["US" "China" "Japan" "Germany"]})
</code></p>

<p><img src="https://github.com/jasongilman/proto-repl-charts/raw/master/examples/bar_chart.png" alt="bar chart" /></p>

<h3 id="displaying-a-scatter-chart">Displaying a Scatter Chart</h3>

<p><code>Clojure
(let [tlr (java.util.concurrent.ThreadLocalRandom/current)]
  (prc/scatter-chart
   "Randoms"
   {:gaussian (repeatedly 200 #(.nextGaussian tlr))
    :uniform  (repeatedly 200 #(.nextDouble tlr))}))
</code></p>

<p><img src="https://github.com/jasongilman/proto-repl-charts/raw/master/examples/scatter_chart.png" alt="scatter chart" /></p>

<h3 id="displaying-a-custom-chart">Displaying a Custom Chart</h3>

<p>Displays a custom chart in a tab with the given name. <a href="http://c3js.org/">C3</a> is the charting library used. The chart config will be converted from Clojure to a JavaScript object and passed to C3. It can be any configuration data C3 supports. See <a href="http://c3js.org/examples.html">C3 examples</a> for more.</p>

<p>```Clojure
(prc/custom-chart
  “Custom”</p>
<pre><code>      :groups [["data1" "data2"]]}}) ```
</code></pre>

<p><img src="https://github.com/jasongilman/proto-repl-charts/raw/master/examples/custom_chart.png" alt="custom chart" /></p>

<h3 id="displaying-a-table">Displaying a Table</h3>

<p>Proto REPL Charts can display a table of data that can be sorted by individual columns. The row data can either be a sequence of sequences or a sequence of maps.</p>

<p>```Clojure
(prc/table
  “Users”
  [{:name “Jane” :age 24 :favorite-color :blue}</p>
<p>{:name “Peter” :age 32 :favorite-color :green}])
```</p>

<p><img src="https://github.com/jasongilman/proto-repl-charts/raw/master/examples/table_from_maps.png" alt="table from maps" /></p>

<h3 id="displaying-a-graph">Displaying a Graph</h3>

<p>Graphs of networks of nodes and edges can be displayed using the <code>prc/graph</code> function. Graphs are displayed using <a href="http://visjs.org/">vis.js</a> networks.</p>

<h4 id="simple-maps-of-nodes-and-edges">Simple Maps of Nodes and Edges</h4>

<p>A simple map of nodes and edges can be provided to describe a graph.</p>

<p><code>Clojure
(prc/graph "A Graph from a map"
           {:nodes [:a :b :c :d :e :f :g]
            :edges [[:d :b] [:b :c] [:d :c] [:e :f] [:f :g]
                    [:d :a] [:f :c]]})
</code></p>

<p><img src="https://github.com/jasongilman/proto-repl-charts/raw/master/examples/map_graph.png" alt="map graph" /></p>

<h4 id="loom-graphs">Loom Graphs</h4>

<p><a href="https://github.com/aysylu/loom">Loom</a> graphs are supported as well.</p>

<p><code>Clojure
(require '[loom.graph :as lg])
(let [graph (lg/graph [1 0] [2 0] [4 0] [3 4] [5 4] [10 4] [9 10] [11 10]
                      [15 10] [17 15] [15 16] [7 0] [6 7] [8 6])]
  (prc/graph "Loom Graph" graph))
</code></p>

<h4 id="event-handling">Event Handling</h4>

<p>Proto REPL Charts supports subscribing to graph events. The events supported are listed <a href="http://visjs.org/docs/network/#Events">here with visjs documentation</a>. Pass a map of event types and handler function names with the options map argument. The function names must be fully scoped with namespace. The function will be invoked with the nodes and edges involved in the event.</p>

<p>```Clojure
(defn handle-double-click
  [event-data]
  (println (pr-str event-data))))</p>

<p>(prc/graph “A Graph from a map”
           {:nodes [:a :b :c]
            :edges [[:a :b] [:a :c]]}
           {:events {:doubleClick ‘user/handle-double-click}})
```</p>

<p>Double clicking a node prints something like the following. Node click data includes the full data of the node that was clicked and the edges that connect to that node.</p>

<p><code>Clojure
{:nodes [{:label "a", :id "a"}],
 :edges [{:from "a",
          :id "e2ca05c8-a5bf-4b3b-b8bc-fd619a6360e3",
          :to "b"}
         {:from "a",
          :id "bd2191cf-1aae-449a-b13f-bb12e4ebaa7c",
          :to "c"}]}
</code></p>

<h4 id="full-visjs-customization">Full vis.js Customization</h4>

<p>The full customization power of vis.js is supported. See the <a href="http://visjs.org/docs/network/">vis.js documentation</a> for information on <a href="http://visjs.org/docs/network/">options</a>, <a href="http://visjs.org/docs/network/nodes.html">nodes</a>, or <a href="http://visjs.org/docs/network/edges.html">edges</a>.</p>

<p>This is a <a href="http://visjs.org/examples/network/nodeStyles/groups.html">groups example</a></p>

<p><code>Clojure
;; Groups will be given unique colors
(let [nodes [{:id 0 :label "0" :group 0}
             {:id 1 :label "1" :group 0}
             {:id 2 :label "2" :group 0}
             {:id 3 :label "3" :group 1}
             {:id 4 :label "4" :group 1}
             {:id 5 :label "5" :group 1}
             {:id 6 :label "6" :group 2}
             {:id 7 :label "7" :group 2}
             {:id 8 :label "8" :group 2}
             {:id 9 :label "9" :group 3}
             {:id 10 :label "10" :group 3}
             {:id 11 :label "11" :group 3}
             {:id 12 :label "12" :group 4}
             {:id 13 :label "13" :group 4}
             {:id 14 :label "14" :group 4}
             {:id 15 :label "15" :group 5}
             {:id 16 :label "16" :group 5}
             {:id 17 :label "17" :group 5}
             {:id 18 :label "18" :group 6}
             {:id 19 :label "19" :group 6}
             {:id 20 :label "20" :group 6}
             {:id 21 :label "21" :group 7}
             {:id 22 :label "22" :group 7}
             {:id 23 :label "23" :group 7}
             {:id 24 :label "24" :group 8}
             {:id 25 :label "25" :group 8}
             {:id 26 :label "26" :group 8}
             {:id 27 :label "27" :group 9}
             {:id 28 :label "28" :group 9}
             {:id 29 :label "29" :group 9}]
      edges [[1 0] [2 0] [4 3] [5 4] [4 0] [7 6] [8 7] [7 0] [10 9] [11 10]
             [10 4] [13 12] [14 13] [13 0] [16 15] [17 15] [15 10] [19 18]
             [20 19] [19 4] [22 21] [23 22] [22 13] [25 24] [26 25] [25 7]
             [28 27] [29 28] [28 0]]]
  (prc/graph "Custom Graph"
             {:nodes nodes :edges edges}
             ;; Options
             {:nodes {:shape "dot" :size 30 :font {:size 32 :color "#111111"}
                      :borderWidth 2}
              :edges {:width 2}}))
</code></p>

<p><img src="https://github.com/jasongilman/proto-repl-charts/raw/master/examples/custom_graph.png" alt="custom graph" /></p>

clojure,lisp,repl,interactive,graph,chart,visual
    </section>
    <footer>
      <p>
        Made with <span class="octicon octicon-heart"></span> by <a href="http://bastilian.me">@bastilian</a>
      </p>
      <p>
        <small>Last updated: 2016-04-29</small>
      </p>
    </footer>
    <div style="opacity:.15;position:relative;z-index:-1;">
      <div class="system"></div>
      <div class="system-2"></div>
    </div>
    <a href="https://github.com/bastilian/atom-packages.directory">
      <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png">
    </a>
  </body>
</html>
